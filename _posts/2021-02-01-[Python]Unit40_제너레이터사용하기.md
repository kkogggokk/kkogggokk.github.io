---
layout: post
title:  "[Python]Unit40.제너레이터 사용하기"
date:   2021-02-01
categories: Python
tags: Python  
---

* content
{:toc}

[Python]Unit40.제너레이터 사용하기 









# 40. 제너레이터 사용하기
- 제너레이터(발생자) : 이터레이터를 생성해주는 함수 
- 이터레이터는 클래스에 \_\_iter\_\_, \_\_next__ ,\_\_getitem__ 등 메서드를 구현해야 하지만
- 제너레이터는 함수안에서 yield라는 키워드만 사용하면 끝

## 40.1 제너레이터와 yield 알아보기
- 함수 안에서 yield 를 사용하면 함수는 제너레이터가 되면 yield에는 값(변수)을 지정한다.
```python
yield 값
```


```python
# yield를 사용해 제너레이터를 만들고 for반복문에서 0, 1, 2 숫자 세개를 출력 
def number_generator() :
    yield 0
    yield 1
    yield 2
    
for i in number_generator() :
    print(i)  # yield에 지정했던 값이 나온다
```

    0
    1
    2
    

###  40.1.1 제너레이터 객체가 이터레이터인지 확인
- dir함수로 메서드 목록을 확인한다


```python
g = number_generator()
print(g)  # generator object 가 반환한다. 
print(dir(g)) # 이터레이터에서 볼수 있는 __iter__, __next__  메서드가 들어있다.
```

    <generator object number_generator at 0x00000163E86A8660>
    ['__class__', '__del__', '__delattr__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__name__', '__ne__', '__new__', '__next__', '__qualname__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'close', 'gi_code', 'gi_frame', 'gi_running', 'gi_yieldfrom', 'send', 'throw']
    


```python
# 실제 __next__를 호출해보면 숫자 0, 1, 2 나오며 StopTeration 예외가 발생한다. 
```


```python
g.__next__()
```


    ---------------------------------------------------------------------------

    StopIteration                             Traceback (most recent call last)

    <ipython-input-15-42e506b10868> in <module>
    ----> 1 g.__next__()
    

    StopIteration: 


- 함수에 yield만 사용해서 간단하게 이터레이터를 구현할 수 있다.
- 단, 이터레이터는 \_\_next__메서드 안에서 직접 return으로 값을 반환했지만
- 제너레이터는 yield에 지장한 값이 \_\_next__메서드(next 함수)의 반환값으로 나온다.         

|이터레이터|제너레이터|
|--|--|
|\_\_iter__, \_\_next__ <br>\_\_next__메서드 안에서 직접 return으로 값을 반환<br>raise로 StopIteration예외를 직접 발생|함수에 yield만 사용해서 간단하게 구현<br>제너레이터는 yield에 지정한 값이 \_\_next__메서드의 반환값<br>함수의 끝까지 도달하면 StopIteration예외가 자동 발생|

### 40.1.2 for와 제너레이터
- for 반복문은 반복할 때 마다 \_\_next__를 호출하므로 yield에서 발생시킨 값을 가져온다.
- 그리고 StopIteration예외가 발생하면 반복을 끝낸다.
![for반복문과 제너레이터](https://dojang.io/pluginfile.php/13960/mod_page/content/4/040001.png)
- 제너레이터 객체에서 \_\_iter\_\_를 호출하면 self를 반환하므로 같은 객체가 나온다
- 제너레이터 함수 호출 → 제너레이터 객체 → \_\_iter__는 self 반환 → 제너레이터 객체
- yield : 생산하다, 양보하다 뜻을 가짐 
    - 즉, yield를 사용하면 값을 함수 바깥으로 전달하면서 코드 실행을 함수 바깥으로 양보한다. 
    - 따라서 yield는 현재 함수를 잠시 중단하고 함수 바깥의 코드가 실행되도록 만든다.

### 40.1.3 yield 동작과정 
- yield  동작 과정을 알아보기 위해 for 반복문 대신 next함수로 \_\_next__메서드를 직접 호출 



```python
def number_generator() :
    yield 0 # 0을 함수 바깥으로 전달하면서 코드 실행을 함수 바깥에 양보 
    yield 1 # 1을 함수 바깥으로 전달하면서 코드 실행을 함수 바깥에 양보 
    yield 2 # 2을 함수 바깥으로 전달하면서 코드 실행을 함수 바깥에 양보 
    
g = number_generator()

a = next(g) # yield를 사용하여 함수 바깥으로 전달한 값은 next의 반한값으로 나옴
print(a) # 0

b = next(g)
print(b) # 1

c = next(g)
print(c) # 2 
```

    0
    1
    2
    


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


---
## References      
> - 코딩도장